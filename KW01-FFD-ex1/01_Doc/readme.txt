
功能概要：基于MQXLite的KW01硬件功能测试
版权所有：苏州大学飞思卡尔嵌入式中心(sumcu.suda.edu.cn)
版本更新：2015-09-14 V2.0

硬件说明：v2版本最新引脚
	   SPI引脚：PTD0\PTC5\PTC6\PTC7   ―>   PCS\SCK\MOSI\MISO   
	        使用SPI0进行片间通信
	        串口：PTA1―>接收、PTA2―>发送
	        外接时钟源：PTA18―>接RF出来的晶振（32MHz）
	   DIO：PTC3\PTC4\PTD4   ->   DIO0\DIO1\DIO4             
       RF复位：PTE30

1. 工程概述
(1)本工程为基于MQXLite的KW01硬件功能测试样例程序，主要包括RF收发和串口收发
(2)使用串口与外界通信，使用串口0，波特率为9600，1位停止位，无校验
(3)任务功能简述：除主任务之外，任务可分为三部分，运行指示灯任务、RF收发任务和串口收发任务。
task_light(运行指示灯任务)用于指示程序的正常运行，
RF收发任务由task_rf_recv和task_rf_send两个任务组成，数据包来自RF的ISR.功能暂未定义
串口收发任务由task_UART、task_ADC和task_PIT三个任务组成，数据帧来自串口调试终端。
注意：使用串口发送数据时，注意勾选"HEX发送"，以表明是数据以十六进制格式发送给MCU

(4)体现要素一览：
任务同步与通信：
轻量级事件：事件组组名是lwevent_group，共使用了32个事件位的三位，EVENT_UART0_RE、EVENT_ADC、EVENT_PIT
轻量级消息队列:共使用了三个，分别为rf_recv_queue、rf_send_queue、uart_send_queue,
前两个用于RF收和发，最后一个用于UART发送
中断：嘀嗒中断（内中断，其余为外中断）、RF中断、串口中断、PIT中断

2. 软件环境
(1)KDS3.1.0

3. 硬件环境
(1)KW01 V05(硬件第五版,SD-14-05)
(2)Light_D1对应引脚为PTD7
(3)串口0模块的发送引脚为PTA0，接收引脚为PTA1
	
4. 实验现象
(1)KW01 V06板上的电源灯常亮
(2)节点上的运行指示灯闪烁（引脚是KW01的PTD7）
(3)复位节点之后通过串口发送字符串" Hello world!"
(4)若RF在1秒之内未接收到数据，则通过串口显示发送数据包内容，若接收成功，则发送接收成功数据包。在这两个数据包中
都包含了当前芯片温度，以及收发器能量值

5. 数据帧格式设计

帧头   长度  命令字 数据       硬件地址    数据        帧尾
1B     1B      1B                      1B           nB   1B
P      1+n                           1B            nB   C



判断握手命令还是转发命令―根据硬件地址判断
硬件地址   =0    --握手命令
硬件地址!=0    --转发命令


声明：
（1）我们开发的源代码，在本中心提供的硬件系统测试通过，真诚奉献给社会，不足之处，
欢迎指正。
（2）对于使用非本中心硬件系统的用户，移植代码时，请仔细根据自己的硬件匹配。

苏州大学飞思卡尔嵌入式中心（苏州华祥信息科技有限公司）
技术咨询：0512-65214835  http://sumcu.suda.edu.cn
业务咨询：0512-87661670  http://www.hxtek.com.cn
